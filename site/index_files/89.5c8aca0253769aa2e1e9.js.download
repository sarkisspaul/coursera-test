(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{A9b0:function(module,e,t){"use strict";t.r(e);var n=t("VbXa"),i=t.n(n),o=t("AeFk"),r=t("q1tI"),a=t.n(r),s=t("MnCE"),u=t("+LJP"),d=t("sQ/U"),c=t("RH4a"),l=t("FtgG"),m=t("3AF4"),p=t("rD/6"),f=t("s3XC"),v=t("zaiP"),b=t("wIYG"),g=t("kIii"),S=t("tcH/"),I=t("JEIr"),y=t("wjH1"),h=t("0n3a"),D=t("agp5"),R=t("VkAN"),O=t.n(R),P=t("4KRT"),C=t("lTCR"),Q=t.n(C),j=t("3tO9"),z=t.n(j),E=t("O5zz"),B,q,A={contentRequestBody:{argument:[]}},T={contentRequestBody:[]},x=Q()(B||(B=O()(['\n  query practiceQuizSessionMetaDataQuery($itemId: String!, $userId: Int!, $slug: String!, $body: String!) {\n    practiceQuizSessionMetaData(body: $body, itemId: $itemId, userId: $userId, slug: $slug)\n      @rest(\n        type: "RestPracticeQuizSessionMetadata"\n        path: "opencourse.v1/user/{args.userId}/course/{args.slug}/item/{args.itemId}/quiz/session"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      contentResponseBody @type(name: "RestPracticeQuizSessionDataResponseBody")\n    }\n  }\n']))),k=Q()(q||(q=O()(['\n  query practiceQuizDataQuery(\n    $itemId: String!\n    $userId: Int!\n    $slug: String!\n    $sessionId: String!\n    $body: String!\n    $skipFetchingResponses: Boolean!\n  ) {\n    practiceQuizQuestionData(itemId: $itemId, userId: $userId, slug: $slug, sessionId: $sessionId, body: $body)\n      @rest(\n        type: "RestPracticeQuizQuestionGetStateData"\n        path: "opencourse.v1/user/{args.userId}/course/{args.slug}/item/{args.itemId}/quiz/session/{args.sessionId}/action/getState?autoEnroll=false"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      contentResponseBody @type(name: "RestPracticeQuizQuestionDataResponseBody") {\n        return @type(name: "RestContentResponseBodyReturnObject") {\n          parts\n          questions\n          nextSubmissionDraftId\n        }\n      }\n    }\n    practiceQuizQuestionResponses(itemId: $itemId, userId: $userId, slug: $slug, sessionId: $sessionId, body: $body)\n      @skip(if: $skipFetchingResponses)\n      @rest(\n        type: "RestPracticeQuizLatestSubmissionDraftResponse"\n        path: "opencourse.v1/user/{args.userId}/course/{args.slug}/item/{args.itemId}/quiz/session/{args.sessionId}/action/getLatestSubmissionDraft?autoEnroll=false"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      contentResponseBody @type(name: "RestPracticeQuizQuestionDataResponseBody") {\n        return @type(name: "RestContentResponseBodyReturnObject") {\n          draft\n        }\n      }\n    }\n  }\n']))),M,w=function PracticeQuizData(e){var t=e.slug,n=e.itemId,i=e.userId,o=e.fetchPolicy,r=void 0===o?"cache-first":o,s=e.examSessionId,u=e.children,d={slug:t,itemId:n,userId:i};return a.a.createElement(P.Query,{query:x,variables:z()(z()({},d),{},{body:T}),fetchPolicy:r,skip:!!s},(function(e){var t=e.loading,n=e.data,i=e.refetch;if(t&&!s)return u({loading:t});var o=s||((((n||{}).practiceQuizSessionMetaData||{}).contentResponseBody||{}).session||{}).id;return(a.a.createElement(P.Query,{query:k,variables:z()(z()({},d),{},{sessionId:o,body:A,skipFetchingResponses:!!s}),fetchPolicy:r},(function(e){var t,n,r,a,d=e.loading,c=e.data,l=e.refetch,m=e.client;if(d)return u({loading:d});var p=(null==c?void 0:null===(t=c.practiceQuizQuestionData)||void 0===t?void 0:null===(n=t.contentResponseBody)||void 0===n?void 0:n.return)||{},f=p.parts,v=p.questions,b=p.nextSubmissionDraftId,g,S=((null==c?void 0:c.practiceQuizQuestionResponses)||{}).contentResponseBody,I,y=((null==S?void 0:null===(r=S.return)||void 0===r?void 0:null===(a=r.draft)||void 0===a?void 0:a.input)||{}).responses,h=Object(E.a)({parts:f,questions:v,responses:y,examSessionId:s}),D=function refetchPracticeQuizData(){return i().then((function(){return l()}))};return u(z()(z()({},h),{},{loading:d,practiceQuizFormData:h.quizFormData,sessionId:o,totalPoints:h.totalPoints,isSubmitted:h.isSubmitted,nextSubmissionDraftId:b,hasDraft:h.hasDraft,practiceQuizQuestions:h.quizQuestions,refetchPracticeQuizData:D,client:m}))})))}))},F,N=function practiceQuizActionMutationUpdate(e){return function(t,n){var i=n.data,o=e.itemId,r=e.userId,a=e.slug,s=e.sessionId,u=(((i||{}).action||{}).contentResponseBody||{}).return||null,d=t.readQuery({query:k,variables:{itemId:o,userId:r,slug:a,sessionId:s,skipFetchingResponses:!1,body:A}}),c=(((d||{}).practiceQuizQuestionData||{}).contentResponseBody||{}).return||null;c&&(c.nextSubmissionDraftId=(u||{}).nextSubmissionDraftId||null,c.questions=(u||{}).questions||c.questions||null,c.parts=(u||{}).parts||c.parts||null,c.evaluation=(u||{}).evaluation||null,t.writeQuery({query:k,variables:{itemId:o,userId:r,slug:a,sessionId:s,skipFetchingResponses:!1,body:A},data:d}))}},L,U,K=Q()(L||(L=O()(['\n  mutation practiceQuizSaveSubmissionDraftActionMutation(\n    $itemId: String!\n    $userId: Int!\n    $slug: String!\n    $sessionId: String!\n    $body: String!\n    $additionalParams: String!\n  ) {\n    action(\n      itemId: $itemId\n      userId: $userId\n      slug: $slug\n      sessionId: $sessionId\n      body: $body\n      additionalParams: $additionalParams\n    )\n      @rest(\n        type: "PracticeQuizSaveSubmissionDraftData"\n        path: "opencourse.v1/user/{args.userId}/course/{args.slug}/item/{args.itemId}/quiz/session/{args.sessionId}/action/saveSubmissionDraft?autoEnroll=false{args.additionalParams}"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      contentResponseBody @type(name: "RestPracticeQuizQuestionDataResponseBody") {\n        return @type(name: "RestContentResponseBodyReturnObject") {\n          nextSubmissionDraftId\n          questions @skip(if: $skipQuestionsField)\n          parts @skip(if: $skipQuestionsField)\n          evaluation\n        }\n      }\n    }\n  }\n']))),G=Q()(U||(U=O()(['\n  mutation practiceQuizSubmitResponseActionMutation(\n    $itemId: String!\n    $userId: Int!\n    $slug: String!\n    $sessionId: String!\n    $body: String!\n  ) {\n    action(itemId: $itemId, userId: $userId, slug: $slug, sessionId: $sessionId, body: $body)\n      @rest(\n        type: "PracticeQuizSubmitResponseData"\n        path: "opencourse.v1/user/{args.userId}/course/{args.slug}/item/{args.itemId}/quiz/session/{args.sessionId}/action/submitResponses?autoEnroll=false"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      contentResponseBody @type(name: "RestPracticeQuizQuestionDataResponseBody") {\n        return @type(name: "RestContentResponseBodyReturnObject") {\n          nextSubmissionDraftId\n          evaluation\n          questions\n          parts\n        }\n      }\n    }\n  }\n']))),H=function SaveDraftMutation(e){var t=e||{},n=t.changedResponses,i=t.nextSubmissionDraftId,o=t.sessionId,r=t.userId,s=t.itemId,u=t.slug;return(a.a.createElement(P.Mutation,{mutation:K,update:N(e)},(function(t){var a={contentRequestBody:{argument:{id:i,input:{responses:n}}}},d=function saveDraft(){return t({variables:{body:a,sessionId:o,userId:r,itemId:s,slug:u,skipQuestionsField:!0,additionalParams:""}})},c=function autoSaveDraft(){return t({variables:{body:a,sessionId:o,userId:r,itemId:s,slug:u,skipQuestionsField:!0,additionalParams:"&isAutoSaving=true"}})};return e.children({saveDraft:d,autoSaveDraft:c})})))},J=function SubmitDraftMutation(e){var t=e||{},n=t.changedResponses,i=t.sessionId,o=t.userId,r=t.itemId,s=t.slug;return(a.a.createElement(P.Mutation,{mutation:G,update:N(e)},(function(t){var a={contentRequestBody:{argument:{responses:n}}},u=function submitDraft(){return t({variables:{body:a,sessionId:i,userId:o,itemId:r,slug:s}})};return e.children({submitDraft:u})})))},V=function PracticeQuizMutations(e){var t=e.ids,n=e.sessionId,i=e.itemId,o=e.courseId,r=e.changedResponses,s=e.children,u=e.slug,d=e.userId,c=e.nextSubmissionDraftId;return(a.a.createElement(H,{changedResponses:r,nextSubmissionDraftId:c,sessionId:n,userId:d,itemId:i,slug:u},(function(e){var t=e.saveDraft,o=e.autoSaveDraft;return(a.a.createElement(J,{changedResponses:r,sessionId:n,userId:d,itemId:i,slug:u},(function(e){var n=e.submitDraft;return s({saveDraft:t,autoSaveDraft:o,submitDraft:n})})))})))},W=V,X,Y=function PracticeQuizActions(e){var t=e.ids,n=e.sessionId,i=e.children,o=e.nextSubmissionDraftId;return(a.a.createElement(v.a,null,(function(e){var r=e.item;if(!r)return null;var s=r.courseId,u=r.id,l=r.courseSlug;return(a.a.createElement(I.a,{userId:d.a.get().id,itemId:u,slug:l},(function(e){var m=e.refetch;return(a.a.createElement(D.a,{ids:t},(function(e){if(!e||!m)return i({});return(a.a.createElement(c.a,{itemId:u,courseId:s},(function(c){var p=c.stepState,f=c.setStepState,v=e.map((function(e){return{questionInstance:e.id,response:((e.response||{}).definition||{}).value}}));return a.a.createElement(V,{ids:t,sessionId:n,itemId:u,courseId:s,slug:l,userId:d.a.get().id,changedResponses:v,nextSubmissionDraftId:o},(function(t){var n=t.saveDraft,s=t.submitDraft,u=function saveDraft(){if(!p.isSaving&&!p.isSubmitting&&o)return f({isSaving:!0}),n().then((function(){return f({isSaving:!1})})).catch((function(e){return Object(y.a)(e,f)}));return Promise.reject()},d=function autoSaveDraft(){if(!p.isAutoSaving&&!p.isSubmitting&&o)return f({isAutoSaving:!0}),n().then((function(){return f({isAutoSaving:!1})})).catch((function(e){return Object(y.a)(e,f)}));return Promise.reject()},c=function refetchItemAndEvaluations(){return m().then((function(){return r.refetch()})).catch((function(e){return Object(y.a)(e,f)}))},l=function submitDraft(){if(!p.isSubmitting)return f({isSubmitting:!0}),s().then((function(){return f({isSubmitting:!1})})).then(c).catch((function(e){return Object(y.a)(e,f)}));return Promise.reject()};return a.a.createElement(h.a,{stepState:p,saveDraft:d,changedResponses:e},(function(){return i({saveDraft:u,autoSaveDraft:d,submitDraft:l})}))}))})))})))})))})))},Z=t("w9Ch"),ee=t("usGt"),te=t("VtNW"),ne=t.n(te),ie;t.d(e,"PracticeQuizAttemptPage",(function(){return oe})),t.d(e,"withRedirectToCover",(function(){return re}));var oe=function(e){function PracticeQuizAttemptPage(){return e.apply(this,arguments)||this}i()(PracticeQuizAttemptPage,e);var t=PracticeQuizAttemptPage.prototype;return t.componentDidMount=function componentDidMount(){var e=this.props,t=e.shouldRedirectToCover,n=e.redirectToCover;t&&n()},t.render=function render(){var e=this.props,t=e.redirectToCover,n=e.redirectToNextItem,i=e.addRedirectToCoverToRouteParams,r=e.examSessionId;return Object(o.d)(v.a,null,(function(e){var a=e.item;if(!a)return null;return Object(o.d)(f.b,{onClose:t,ariaLabel:ne()("Practice Quiz"),backbuttonAriaLabel:ne()("Back to the Course"),headerLeft:Object(o.d)(w,{slug:a.courseSlug,itemId:a.id,userId:d.a.get().id,fetchPolicy:"network-only",examSessionId:r},(function(e){var t=e.totalPoints;return Object(o.d)(m.a,{headerText:a.name,itemTypeText:ne()("Practice Quiz"),timeCommitment:a.timeCommitment,totalPoints:t})})),headerRight:Object(o.d)(p.a,{deadline:a.deadline}),topBanner:Object(o.d)(I.a,{slug:a.courseSlug,itemId:a.id,userId:d.a.get().id},(function(e){var i=e.bestEvaluation;return Object(o.d)(w,{slug:a.courseSlug,itemId:a.id,userId:d.a.get().id,fetchPolicy:"network-only",examSessionId:r},(function(e){var r=e.isSubmitted,s,u=(a.contentSummary&&"quiz"===a.contentSummary.typeName&&a.contentSummary.definition||{}).passingFraction,d=Object(Z.a)(i),c=d?d>=u:void 0;if(r&&u&&"number"==typeof d)return Object(o.d)(l.a,{passingFraction:u,itemGrade:{grade:d,isPassed:c||!1,isOverridden:!1,latePenaltyRatio:null},onKeepLearningClick:n,onTryAgainClick:t});return null}))}))},Object(o.d)(w,{slug:a.courseSlug,itemId:a.id,userId:d.a.get().id,fetchPolicy:"network-only",examSessionId:r},(function(e){var t=e.loading,n=e.practiceQuizFormData,r=e.sessionId,s=e.nextSubmissionDraftId,u=e.practiceQuizQuestions,d=e.isSubmitted,l=e.hasDraft;if(t||!n||!u)return ie||(ie=Object(o.d)(b.a,null));var m=u.map((function(e){return e.prompt.id}));return Object(o.d)(c.a,{itemId:a.id,courseId:a.courseId},(function(e){var t=e.stepState,u=e.setStepState;return Object(o.d)("div",null,Object(o.d)("div",null,Object(o.d)(g.a,{quizFormData:n,isSubmitted:d,stepState:t})),!d&&Object(o.d)(Y,{ids:m,sessionId:r,nextSubmissionDraftId:s},(function(e){var n=e.saveDraft,r=e.autoSaveDraft,s=e.submitDraft;return Object(o.d)(S.a,{itemId:a.id,courseId:a.courseId,saveDraft:n,autoSaveDraft:r,submitDraft:function submitDraft(){return s?s().then((function(){i()})):Promise.reject()},hasDraft:l,stepState:t,setStepState:u})})))}))})))}))},PracticeQuizAttemptPage}(a.a.Component),re=Object(s.compose)(ee.a,Object(u.a)((function(e,t){var n=t.nextItemUrl,i=void 0===n?"":n,o=t.refetchPracticeQuizCoverPageData,r=t.refreshProgress,a=function redirectToCover(){o&&o(),e.push({name:"practice-quiz-cover",params:e.params,query:e.location.query}),r()};return{redirectToCover:a,redirectToNextItem:function redirectToNextItem(){i?(e.push(i),r()):a()},addRedirectToCoverToRouteParams:function addRedirectToCoverToRouteParams(){e.push({name:"practice-quiz-attempt",params:e.params,query:{redirectToCover:!0}})},shouldRedirectToCover:e.location.query.redirectToCover}}))),ae=e.default=re(oe)},JEIr:function(module,e,t){"use strict";var n=t("3tO9"),i=t.n(n),o=t("VkAN"),r=t.n(o),a=t("q1tI"),s=t.n(a),u=t("4KRT"),d=t("lTCR"),c,l,m=t.n(d)()(l||(l=r()(['\n  query evaluationsQuery($itemId: String!, $userId: Int!, $slug: String!, $body: String!) {\n    evaluationsQuery(body: $body, itemId: $itemId, userId: $userId, slug: $slug)\n      @rest(\n        type: "RestEvaluations"\n        path: "opencourse.v1/user/{args.userId}/course/{args.slug}/item/{args.itemId}/quiz/evaluations"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      contentResponseBody @type(name: "RestPracticeQuizQuestionDataResponseBody")\n    }\n  }\n']))),p=function Evaluations(e){var t=e.slug,n=e.userId,o=e.itemId,r=e.children,a={slug:t,itemId:o,userId:n},d={contentRequestBody:{}};return s.a.createElement(u.Query,{query:m,variables:i()(i()({},a),{},{body:d}),fetchPolicy:"network-only"},(function(e){var t,n=e.loading,i=e.data,o=e.refetch,a=e.client;if(n)return r({loading:n});var s=(null==i?void 0:null===(t=i.evaluationsQuery)||void 0===t?void 0:t.contentResponseBody)||{},u=s.bestEvaluation,d=s.bestSessionId,c=s.lastEvaluation,l=s.lastSessionId,m=s.unsubmittedSessionId;return r({loading:!1,bestSessionId:d,bestEvaluation:u,lastEvaluation:c,lastSessionId:l,unsubmittedSessionId:m,refetch:o,client:a})}))};e.a=p},O5zz:function(module,e,t){"use strict";var n=t("uFBg"),i=t("w9Ch"),o=t("lSNA"),r=t.n(o),a=t("3tO9"),s=t.n(a),u=t("vU9D"),d=function getDefaultResponseValue(e){var t;if("widget"===(null==e?void 0:null===(t=e.question)||void 0===t?void 0:t.type))return{answer:{}};return null},c,l=function transformQuizPartsToFormData(e,t,i){if(!t)return e&&e.map((function(e){var t,o,r,a;if((null==e?void 0:e.typeName)===n.c||(null==e?void 0:e.typeName)===n.a)return e;return{typeName:null==e?void 0:e.typeName,definition:{prompt:null==e?void 0:e.definition,response:{typeName:u.g.AUTO_GRADABLE_RESPONSE,definition:{value:i&&null!=e&&null!==(t=e.definition)&&void 0!==t&&null!==(o=t.effectiveResponse)&&void 0!==o&&o.response?null==e?void 0:null===(r=e.definition)||void 0===r?void 0:null===(a=r.effectiveResponse)||void 0===a?void 0:a.response:d(null==e?void 0:e.definition)}}}}}));var o=t.reduce((function(e,t){return s()(s()({},e),{},r()({},t.questionInstance,t.response))}),{});return e&&e.map((function(e){var t;if((null==e?void 0:e.typeName)===n.c||(null==e?void 0:e.typeName)===n.a)return e;var i=o[null==e?void 0:null===(t=e.definition)||void 0===t?void 0:t.id];return{typeName:null==e?void 0:e.typeName,definition:{prompt:null==e?void 0:e.definition,response:{typeName:u.g.AUTO_GRADABLE_RESPONSE,definition:{value:i}}}}}))},m=function getQuizPartVariablesFromData(e){var t,o,r,a,s=e.parts,u=e.questions,d=e.responses,c=e.examSessionId,m=e.evaluation,p=l(s,d,!!c)||[],f=Object(i.a)(m),v=(null==m?void 0:m.maxScore)||(null==p?void 0:p.reduce((function(e,t){var i,o,r;if((null==t?void 0:t.typeName)===n.c||(null==t?void 0:t.typeName)===n.a)return 0;return e+(null==t?void 0:null===(i=t.definition)||void 0===i?void 0:null===(o=i.prompt)||void 0===o?void 0:null===(r=o.weightedScoring)||void 0===r?void 0:r.maxScore)}),0)),b=null==s?void 0:s.find((function(e){return e.typeName===n.b})),g=!(null!=b&&null!==(t=b.definition)&&void 0!==t&&t.isSubmitAllowed),S="NoDetails"===(null==u?void 0:null===(o=u[0])||void 0===o?void 0:null===(r=o.variant)||void 0===r?void 0:r.detailLevel),I=!!d,y=null==p?void 0:null===(a=p.filter((function(e){return(null==e?void 0:e.typeName)===n.b})))||void 0===a?void 0:a.map((function(e){return null==e?void 0:e.definition}));return{quizFormData:p,attemptScore:f,totalPoints:v,isSubmitted:g,isLimitedFeedback:S,hasDraft:I,quizQuestions:y}},p=e.a=m},kIii:function(module,e,t){"use strict";var n=t("q1tI"),i=t.n(n),o=t("9iH2"),r=t("AeFk"),a=t("8Hdl"),s=t("HDKb"),u=t("5mFy"),d=t("7Dw/"),c=t("/96O"),l={root:function root(e){return Object(r.c)({display:"flex",marginTop:e.spacing(48),marginBottom:e.spacing(48)})},accordionRoot:function accordionRoot(e){return Object(r.c)({marginLeft:"-16px",button:{outline:"none"},padding:e.spacing(0)})},numberCell:Object(r.c)({width:"26px"}),contentCell:Object(r.c)({width:"calc(100% - 26px)"}),cmlContainer:function cmlContainer(e){return Object(r.c)({".rc-CML.cml-cui p":{marginBottom:e.spacing(0)}})}},m,p=function TextBlock(e){var t=e.textBlock,n=e.isCollapsible,i=void 0!==n&&n,o=e.isExpanded,m=void 0!==o&&o,p=Object(r.d)(a.a,{component:"div",variant:"body1",css:l.cmlContainer},Object(r.d)(c.a,{value:null==t?void 0:t.body}));return Object(r.d)("div",{css:l.root},Object(r.d)("div",{css:l.contentCell},i?Object(r.d)("div",{css:l.accordionRoot},Object(r.d)(s.a,{variant:"silent",defaultExpanded:m},Object(r.d)(u.a,{label:null==t?void 0:t.title}),Object(r.d)(d.a,null,p))):p))},f=t("uFBg"),v=function QuizPartRenderer(e){var t=e.quizFormData,r=e.isSubmitted,a=e.stepState,s,u=0;return i.a.createElement(n.Fragment,null,t.map((function(e){if((null==e?void 0:e.typeName)===f.c||(null==e?void 0:e.typeName)===f.a){var t,n,d,c=e;return(null==c?void 0:c.typeName)!==f.a||s||(s=c),i.a.createElement(p,{textBlock:null==c?void 0:c.definition,isCollapsible:(null==c?void 0:c.typeName)===f.a,isExpanded:(null===(t=s)||void 0===t?void 0:null===(n=t.definition)||void 0===n?void 0:n.id)===(null==c?void 0:null===(d=c.definition)||void 0===d?void 0:d.id)})}u+=1;var l=(null==e?void 0:e.definition)||e;return(i.a.createElement(o.a,{key:null==l?void 0:l.prompt.id,quizQuestion:l,index:u-1,isReadOnly:!!r,isDisabled:!(null==a||!a.isSaving)||!(null==a||!a.isSubmitting)}))})))},b=e.a=v},"tcH/":function(module,e,t){"use strict";var n=t("3tO9"),i=t.n(n),o=t("VbXa"),r=t.n(o),a=t("AeFk"),s=t("q1tI"),u=t.n(s),d=t("HOoY"),c=t("ZJgU"),l=t("8xbv"),m=t("PB6g"),p=t("aFpJ"),f=t("EqTq"),v=t("sF8w"),b=Object(f.a)("BasicErrorModalDisplayManager"),g,S=function(e){function BasicErrorModalDisplayManager(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).state={showErrorModal:!1},t.handleErrorConfirm=function(){var e=t.props.setStepState;t.setState({showErrorModal:!1}),e({errorCode:null})},t}r()(BasicErrorModalDisplayManager,e);var t=BasicErrorModalDisplayManager.prototype;return t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=e.stepState,n=this.props.stepState;n.errorCode||n.errorCode===t.errorCode||this.setState({showErrorModal:!0})},t.render=function render(){var e=this.props.stepState.errorCode,t=this.state.showErrorModal;return u.a.createElement("div",{className:b()},t&&u.a.createElement(v.a,{errorCode:e,onPrimaryButtonClick:this.handleErrorConfirm,onCancelButtonClick:this.handleErrorConfirm}))},BasicErrorModalDisplayManager}(u.a.Component),I=t("CnKM"),y=t("KvdX"),h=t("YmkS"),D=t("qJwm"),R=t("rQpo"),O=t("zaiP"),P=t("8ec0"),C=t("d3Ej"),Q=t.n(C),j,z,E={root:function root(e){return Object(a.c)({margin:e.spacing(48,0)})},buttonsContainer:function buttonsContainer(e){return Object(a.c)({marginTop:e.spacing(32),paddingBottom:e.spacing(48),borderBottom:"1px solid ".concat(e.palette.gray[300]),marginBottom:e.spacing(12)})},saveButton:function saveButton(e){return Object(a.c)({marginLeft:e.spacing(24)})}},B=function(e){function SubmissionControls(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).state={canSubmit:!1,announcement:""},t.onSubmitClick=function(){var e=t.props,n=e.hasUnfilledResponses,i=e.updateAndSubmitDraft,o=e.showModal,r=function trackedUpdateAndSubmitDraft(){return i&&i().then((function(){d.a.trackComponent({namespace:{app:"open_course",page:"item_page"}},{},"submit","quiz")}))};n?o({type:y.a.unansweredQuestions,props:{onPrimaryButtonClick:r}}):i&&(t.setAnnouncement(Q()("Submitting assignment")),r())},t.enableSubmit=function(){t.setState({canSubmit:!0})},t.disableSubmit=function(){t.setState({canSubmit:!1})},t.autoSubmit=function(){var e=t.props,n=e.showModal,i=e.hideModal,o=e.submitLatestSubmissionDraft;n({type:y.a.timeExpiredModal,props:{onPrimaryButtonClick:i}}),o&&o()},t.startAutoSubmitTimeout=function(){var e=t.props.expiresAt;"number"==typeof e&&(t.autoSubmitTimeout=window.setTimeout(t.autoSubmit,e-Date.now()))},t.setAnnouncement=function(e){t.setState({announcement:e},(function(){setTimeout((function(){t.setState({announcement:""})}),150)}))},t.updateDraft=function(){var e=t.props.updateDraft;e&&(t.setAnnouncement(Q()("Saving draft submission")),e().then((function(){t.setAnnouncement(Q()("Draft submission saved successfully"))})))},t}r()(SubmissionControls,e);var t=SubmissionControls.prototype;return t.componentDidMount=function componentDidMount(){var e=this.props,t=e.hasDraft,n=e.autoSaveDraft,i=e.submitLatestSubmissionDraft;!t&&n&&n(),i&&this.startAutoSubmitTimeout()},t.componentDidUpdate=function componentDidUpdate(e){var t=this.props.expiresAt;e.expiresAt!==t&&this.autoSubmitTimeout&&(clearTimeout(this.autoSubmitTimeout),this.autoSubmitTimeout=null,this.startAutoSubmitTimeout())},t.componentWillUnmount=function componentWillUnmount(){this.autoSubmitTimeout&&clearTimeout(this.autoSubmitTimeout)},t.render=function render(){var e=this,t,n,i=this.props,o=i.stepState,r=o.isSaving,s=o.isSubmitting,u=o.isAutoSaving,d=i.stepState,f=i.setStepState,v=i.updateDraft,b=i.updateAndSubmitDraft,g=this.state,I=g.canSubmit,y=g.announcement,P=r||u,C=P||s;return Object(a.d)(O.a,null,(function(i){var o=i.item;if(o&&o.isPremiumGradingLocked)return Object(a.d)("div",null,Object(a.d)(R.a,{courseId:o.courseId}));return Object(a.d)("div",{css:E.root},Object(a.d)("div",null,Object(a.d)(p.a,{onAgreementComplete:e.enableSubmit,onAgreementIncomplete:e.disableSubmit})),Object(a.d)("div",{css:E.buttonsContainer},b&&Object(a.d)(c.a,{"data-test":"submit-button",iconPosition:"before",icon:s?j||(j=Object(a.d)(l.a,null)):void 0,onClick:e.onSubmitClick,disabled:C||!I,variant:"primary"},s?Q()("Submitting…"):Q()("Submit")),v&&Object(a.d)(c.a,{"data-test":"save-draft-button",iconPosition:"before",icon:P?z||(z=Object(a.d)(l.a,null)):void 0,onClick:e.updateDraft,disabled:!!C,variant:"secondary",css:E.saveButton},P?Q()("Saving..."):Q()("Save draft"))),Object(a.d)(h.a,{computedItem:o,itemFeedbackType:D.c.Quiz}),Object(a.d)(m.b,{tagName:"span",role:"region","aria-live":"assertive","aria-atomic":!0},y&&(t||(t=Object(a.d)("span",null,y)))),n||(n=Object(a.d)(S,{stepState:d,setStepState:f})))}))},SubmissionControls}(u.a.Component),q=function SubmissionControlsContainer(e){var t=e.saveDraft,n=e.submitDraft,o=e.hasTimer,r=e.itemId,s=e.isSubmitted;if(!t||!n)return null;if(!o)return Object(a.d)(y.b,null,(function(o){var r=o.showModal,u=o.hideModal;return s?null:Object(a.d)(B,i()(i()({},e),{},{updateDraft:t,updateAndSubmitDraft:n,showModal:r,hideModal:u}))}));return Object(a.d)(I.a,{id:Object(P.a)(r)},(function(o){var r=o.expiresAt;return Object(a.d)(y.b,null,(function(o){var u=o.showModal,d=o.hideModal;return s?null:Object(a.d)(B,i()(i()({},e),{},{updateDraft:t,updateAndSubmitDraft:n,showModal:u,hideModal:d,expiresAt:r}))}))}))},A=e.a=q},uFBg:function(module,e,t){"use strict";t.d(e,"b",(function(){return n})),t.d(e,"c",(function(){return i})),t.d(e,"a",(function(){return o}));var n="question",i="textBlock",o="collapsibleTextBlock"},usGt:function(module,e,t){"use strict";var n=t("17x9"),i=t.n(n),o=t("MnCE"),r=t("8cuT"),a=t("StP4"),s=t("i6HE"),u=t("E4RX"),d=Object(o.compose)(Object(o.getContext)({executeAction:i.a.func.isRequired}),Object(r.a)(["CourseStore"],(function(e,t){var n=e.CourseStore,i=t.executeAction,o=n.getCourseId(),r=n.getCourseSlug();return{refreshProgress:function refreshProgress(){i(s.b,{courseId:o}),i(u.a,{courseId:o,refreshProgress:!0}),i(a.b,{courseSlug:r,refetch:!0})}}})));e.a=d},wIYG:function(module,e,t){"use strict";var n=t("q1tI"),i=t.n(n),o=t("VMeS"),r,a=function A11yCenteredLoadingSpinner(){return r||(r=i.a.createElement("div",{role:"alert","aria-live":"assertive"},i.a.createElement(o.a,null)))};e.a=a}}]);
//# sourceMappingURL=89.5c8aca0253769aa2e1e9.js.map